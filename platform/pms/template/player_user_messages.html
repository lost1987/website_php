{% extends 'base.html'%}

{% block title%}
物品消息发放
{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="/media/css/select2_metro.css" />
<link rel="stylesheet" type="text/css" href="/media/css/chosen.css" />
<link rel="stylesheet" type="text/css" href="/media/css/addtional.css" />
<link rel="stylesheet" type="text/css" href="/media/css/bootstrap-fileupload.css" />
<link rel="stylesheet" type="text/css" href="/media/css/datetimepicker.css" />
{% endblock %}


{% block content %}
<div class="row-fluid">
    <div class="span12">
        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
        <h3 class="page-title">
            物品消息发放
            <small></small>
        </h3>
        <!-- END PAGE TITLE & BREADCRUMB-->
    </div>
</div>

<div class="row-fluid">
    <div class="span12">
        <!-- BEGIN VALIDATION STATES-->
        <div class="portlet box">

            <div class="portlet-title">
                <div class="caption"><i class="icon-reorder"></i></div>
                <div class="tools">
                    <a href="javascript:;" class="collapse"></a>
                    <a href="#portlet-config" data-toggle="modal" class="config"></a>
                    <a href="javascript:;" class="reload"></a>
                    <a href="javascript:;" class="remove"></a>
                </div>
            </div>




            <div class="portlet-body form">
                <!-- BEGIN FORM-->
                <form action="/player/sendUserMessage" id="form_sample_2" class="form-horizontal" method="post"  >
                    <div class="alert alert-error hide">
                        <button class="close" data-dismiss="alert"></button>
                        您提交的信息有错误请更正后再保存
                    </div>

                    <div class="alert alert-success hide">
                        <button class="close" data-dismiss="alert"></button>
                        发送成功!
                    </div>

                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group">
                                <label class="control-label"><b class="midnight">玩家(uid分割)</b><span class="required">*</span></label>
                                <div class="controls">
                                    <textarea  id="players" name="players" rows="10" style="width:400px" ></textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                        <div class="row-fluid">
                            <div class="span12">
                                <div class="control-group">
                                    <label class="control-label"><b class="midnight">标题</b><span class="required">*</span></label>
                                    <div class="controls">
                                        <input name="title" id="title" type="text" class="span4 m-wrap" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span6">
                                <div class="control-group">
                                    <label class="control-label"><b class="midnight">内容</b><span class="required">*</span></label>
                                    <div class="controls">
                                        <textarea  id="content" name="content" rows="10" style="width:400px" ></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span6">
                                <div class="control-group">
                                    <label class="control-label"><b class="midnight">物品1</b><span class="required"></span></label>
                                    <div class="controls">
                                      <select name="item_id[]" class="span5">
                                          {% for item_id,name in items%}
                                            <option value="{{item_id}}">{{name}}</option>
                                          {% endfor %}
                                      </select>
                                        <input type="text" name="item_num[]"  class="span3" placeholder="数量"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group">
                                <label class="control-label"><b class="midnight">物品2</b><span class="required"></span></label>
                                <div class="controls">
                                    <select name="item_id[]" class="span5">
                                        {% for item_id,name in items%}
                                        <option value="{{item_id}}">{{name}}</option>
                                        {% endfor %}
                                    </select>
                                    <input type="text" name="item_num[]"  class="span3" placeholder="数量"/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group">
                                <label class="control-label"><b class="midnight">物品3</b><span class="required"></span></label>
                                <div class="controls">
                                    <select name="item_id[]" class="span5">
                                        {% for item_id,name in items%}
                                        <option value="{{item_id}}">{{name}}</option>
                                        {% endfor %}
                                    </select>
                                    <input type="text" name="item_num[]"  class="span3" placeholder="数量"/>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group">
                                <label class="control-label"><b class="midnight">物品4</b><span class="required"></span></label>
                                <div class="controls">
                                    <select name="item_id[]" class="span5">
                                        {% for item_id,name in items%}
                                        <option value="{{item_id}}">{{name}}</option>
                                        {% endfor %}
                                    </select>
                                    <input type="text" name="item_num[]"  class="span3" placeholder="数量"/>
                                </div>
                            </div>
                        </div>
                    </div>

                        <div class="form-actions">
                            <button type="button" id="sendbtn" class="btn red" onclick="send()">发送</button>
                            <button type="reset" class="btn">重置</button>
                        </div>
                </form>
                <!-- END FORM-->
            </div>
        </div>
        <!-- END VALIDATION STATES-->
    </div>
</div>

{% endblock %}

{% block javascript_plugins%}
<script type="text/javascript" src="/media/js/select2.min.js"></script>
<script type="text/javascript" src="/media/js/chosen.jquery.min.js"></script>
{% endblock  %}

{% block javascript_custom %}
<script>
    var success = {{success|default(0)}};
    $(function(){
        if(success == 1)
            $('.alert-success').show();
    })

    function send(){
            var players = $("#players").val().replace(/\s+/g,'');
            if(players == ''){
                alert('请填写玩家uid,逗号分割');
                return;
            }

            var title = $("#title").val().replace(/\s+/g,'');
            if(title == ''){
                alert('请填标题');
                return;
            }

            var content = $("#content").val().replace(/\s+/g,'');
            if(content == ''){
                alert('请填内容');
                return;
            }

            $("#form_sample_2").submit();
    }
</script>
{% endblock %}

