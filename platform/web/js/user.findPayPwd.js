$(function(){jQuery.validator.addMethod("email_or_phone",function(b,a,c){if(c){if(!$.is_email(b)&&!$.is_mobile(b)){return false}return true}},"邮箱或手机号格式错误");$("#findPwdForm1").validate({rules:{login_name:{required:true,rangelength:[4,16]},email_or_phone:{required:true,email_or_phone:true,remote:{url:"/user/checkForgetPassword",type:"post",dataType:"json",data:{login_name:function(){return $("#login_name0").val()},email_or_phone:function(){return $("#email_or_phone").val()},csrf_token:token}}}},messages:{login_name:{required:"请输入账号",rangelength:"账号格式错误"},email_or_phone:{required:"请输入认证信息",remote:"用户名与认证信息不匹配"}},errorPlacement:function(a,b){$(a).appendTo($(b).parent().parent())},success:function(a){$(a).html('<img src="../../images/icons/icon_accept.png" />')},submitHandler:function(a){$("#sbBtn").attr("disabled",true);a.submit()}});$("#findPwdForm3").validate({rules:{password:{required:true,rangelength:[6,16]},re_password:{required:true,rangelength:[6,16],equalTo:"#password"}},messages:{password:{required:"6-16位字母、数字",rangelength:"6-16位字母、数字"},re_password:{required:"6-16位字母、数字",rangelength:"6-16位字母、数字",equalTo:"两次输入的密码不一样"}},errorPlacement:function(a,b){$(a).appendTo($(b).parent().parent())},success:function(a){$(a).html('<img src="../../images/icons/icon_accept.png" />')},submitHandler:function(a){$("#sbBtn").attr("disabled",true);$("#hid_password").val(md5($("#password").val()));$("#password").val("abcdefg");$("#re_password").val("abcdefg");a.submit()}})});function loginMail(a){url="http://"+gotoEmail(a);$("#goMailLink").attr("href",url);$("#goMailLink").get(0).click()}function gotoEmail(a){$t=a.split("@")[1];$t=$t.toLowerCase();if($t=="163.com"){return"mail.163.com"}else{if($t=="vip.163.com"){return"vip.163.com"}else{if($t=="126.com"){return"mail.126.com"}else{if($t=="qq.com"||$t=="vip.qq.com"||$t=="foxmail.com"){return"mail.qq.com"}else{if($t=="gmail.com"){return"mail.google.com"}else{if($t=="sohu.com"){return"mail.sohu.com"}else{if($t=="tom.com"){return"mail.tom.com"}else{if($t=="vip.sina.com"){return"vip.sina.com"}else{if($t=="sina.com.cn"||$t=="sina.com"){return"mail.sina.com.cn"}else{if($t=="tom.com"){return"mail.tom.com"}else{if($t=="yahoo.com.cn"||$t=="yahoo.cn"){return"mail.cn.yahoo.com"}else{if($t=="tom.com"){return"mail.tom.com"}else{if($t=="yeah.net"){return"www.yeah.net"}else{if($t=="21cn.com"){return"mail.21cn.com"}else{if($t=="hotmail.com"){return"www.hotmail.com"}else{if($t=="sogou.com"){return"mail.sogou.com"}else{if($t=="188.com"){return"www.188.com"}else{if($t=="139.com"){return"mail.10086.cn"}else{if($t=="189.cn"){return"webmail15.189.cn/webmail"}else{if($t=="wo.com.cn"){return"mail.wo.com.cn/smsmail"}else{if($t=="139.com"){return"mail.10086.cn"}else{return""}}}}}}}}}}}}}}}}}}}}}};