var data_store=[],rank_keys=[],key,token;$(function(){rank_keys.all258="将一色";rank_keys.allonesuite="清一色";rank_keys.allothers="全球人";rank_keys.alltriples="碰碰胡";rank_keys.allwind="风一色";rank_keys.fengs="封顶数";rank_keys.lastdrawablecard="海底捞";rank_keys.littlewin="小胡";rank_keys.quadruplerobbery="抢杠";rank_keys.topdiamond=" 钻石顶";rank_keys.topgold="金顶";rank_keys.winquadruplecard="杠上开花";rank_keys.win_rate="胜率";rank_keys.coins="金币";token=$("#token").val();var c=$(".col-xs-2").find("a");var a=$(".col-xs-2").find("li");var b="global";c.each(function(d){$(this).click(function(){a.removeClass("active");a.eq(d).addClass("active");key=$(this).attr("rel");var e=b+"_"+key;if(key==undefined){key="coins"}if(data_store[b+"_"+key]==undefined){getData(b,key)}else{setList(data_store[e])}})})});function getData(b,a){$.post("/rank/getData/"+b+"/"+a,"csrf_token="+token,function(d){var c=$.parseJson(d);if(c!="error"){var e=b+"_"+a;data_store[e]=c;setList(data_store[e])}})}function setList(c){var a=$(".col-xs-10").find("table").find("tr");a.each(function(){if($(this).attr("rel")=="render"){$(this).remove()}});var b="";$("tbody").html("");$.each(c,function(d,e){var f="<td>";b+='<tr rel="render">';b+=f+e.order+"</td>";if(e.isme==0){b+=f+e.nickname+"</td>"}else{b+=f+'<font color="red">'+e.nickname+"</font></td>"}b+=f+e.area+"</td>";b+=f+e.coins+"</td>";if(key=="coins"){b+=f+e.win_rate+"</td>"}else{b+=f+e[key]+"</td>"}b+="</tr>"});if(key=="coins"){$("#sp").html(rank_keys.win_rate)}else{$("#sp").html(rank_keys[key])}$(".col-xs-10").find("table").append(b)};