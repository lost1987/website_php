{% extends 'base.html'%}

{% block title%}
{{action_name}}商品栏目
{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="/media/css/select2_metro.css" />
<link rel="stylesheet" type="text/css" href="/media/css/chosen.css" />
<link rel="stylesheet" type="text/css" href="/media/css/addtional.css" />
<link rel="stylesheet" type="text/css" href="/media/css/bootstrap-fileupload.css" />
{% endblock %}


{% block content %}
<div class="row-fluid">
    <div class="span12">
        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
        <h3 class="page-title">
            商品管理
            <small></small>
        </h3>
        <!-- END PAGE TITLE & BREADCRUMB-->
    </div>
</div>

<div class="row-fluid">
<div class="span12">
<!-- BEGIN VALIDATION STATES-->
<div class="portlet box">

<div class="portlet-title">
    <div class="caption"><i class="icon-reorder">{{action_name}}商品栏目</i></div>
    <div class="tools">
        <a href="javascript:;" class="collapse"></a>
        <a href="#portlet-config" data-toggle="modal" class="config"></a>
        <a href="javascript:;" class="reload"></a>
        <a href="javascript:;" class="remove"></a>
    </div>
</div>


<div class="portlet-body form">
<!-- BEGIN FORM-->
<form action="{{action}}" id="form_sample_2" class="form-horizontal" method="post" enctype="multipart/form-data">
<input type="hidden" name="csrf_token" value="{{token}}" />
<div class="alert alert-error hide">
    <button class="close" data-dismiss="alert"></button>
    您提交的信息有错误请更正后再保存
</div>

<div class="alert alert-success hide">
    <button class="close" data-dismiss="alert"></button>
    保存成功!
</div>

<div class="control-group">
    <label class="control-label"><b class="midnight">栏目名称</b><span class="required">*</span></label>
    <div class="controls">
        <input type="text" name="name" data-required="1" class="span3 m-wrap" value="{{item.name}}"/>
    </div>
</div>

<div class="control-group">
    <label class="control-label"><b class="midnight">栏目排序</b><span class="required">*</span></label>
    <div class="controls">
        <input type="text" name="order" data-required="1" class="span3 m-wrap" value="{{item.order}}"/>
    </div>
</div>

<div class="control-group">
    <label class="control-label"><b class="midnight">单价</b><span class="required">*</span></label>
    <div class="controls">
        <input type="text" name="unit_price" data-required="1" class="span3 m-wrap" value="{{item.unit_price}}"/>
    </div>
</div>

<div class="control-group">
    <label class="control-label"><b class="midnight">价格类型</b><span class="required">*</span></label>
    <div class="controls chzn-controls">
        <select class="span4 m-wrap" name="unit_price_type">
            {% for val,name in price_types %}
            {% if val == item.unit_price_type %}
            <option value="{{val}}" selected="selected">{{name}}</option>
            {% else %}
            <option value="{{val}}">{{name}}</option>
            {% endif %}
            {% endfor %}
        </select>
    </div>
</div>

<div class="control-group">
    <label class="control-label"><b class="midnight">可见</b><span class="required">*</span></label>
    <div class="controls chzn-controls">
            <select class="span1 m-wrap" name="visible">
            {% if item.visible %}
            <option value="0" >否</option>
            <option value="1" selected="selected">是</option>
            {% else %}
            <option value="0" selected="selected">否</option>
            <option value="1">是</option>
            {% endif %}
        </select>
    </div>
</div>

<div class="control-group">
    <label class="control-label"><b class="midnight">商品图片</b><span class="required">*</span></label>
    &nbsp;&nbsp;&nbsp; &nbsp;
    <b class="midnight">文件大小小于100KB</b>
    <div class="controls">
        <div class="fileupload fileupload-new" data-provides="fileupload">
            <div class="fileupload-new thumbnail" style="width: 200px;">
                <img src="{{item.image}}" rel="image-upload" />
            </div>
            <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px;  line-height: 20px;"></div>
            <div>
                                        <span class="btn btn-file"><span class="fileupload-new">浏览</span>
                                        <span class="fileupload-exists">重选</span>
                                        <input type="file" class="default" name="image" id="image" accept="image/gif,image/jpeg,image/png" />
                                        </span>
                <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">删除</a>
            </div>
        </div>
    </div>
</div>

<div class="control-group">
    <label class="control-label"><b class="midnight">描述</b><span class="required">*</span></label>
    <div class="controls">
        <textarea cols="40" rows=5 name="desp" >{{item.desp}}</textarea>
    </div>
</div>



<div class="form-actions">
    <button type="submit" class="btn red">保存</button>
    <button type="reset" class="btn">重置</button>
</div>
</form>
<!-- END FORM-->
</div>
</div>
<!-- END VALIDATION STATES-->
</div>
</div>

{% endblock %}

{% block javascript_plugins%}
<script type="text/javascript" src="/media/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="/media/js/additional-methods.min.js"></script>
<script type="text/javascript" src="/media/js/select2.min.js"></script>
<script type="text/javascript" src="/media/js/chosen.jquery.min.js"></script>
<script type="text/javascript" src="/media/js/bootstrap-fileupload.js"></script>
{% endblock  %}

{% block javascript_custom %}
<script src="/media/js/private/store_category_add.js"></script>
<script>
    var success = {{success}};
   $(function(){
       FormValidation.init();
        if(success == 1)
            $('.alert-success').show();


       {% if action_name == '编辑'%}
           //编辑时 删除图片验证规则
           $("#image").rules('remove');
           {% endif %}
   })
</script>
{% endblock %}

