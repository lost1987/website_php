{% extends 'base.html' %}

{% block content %}
<div class="row" >
    <h3><small class="badge badge-info">添加网点商家</small></h3>
    <div class="col-xs-12">
        {% if admin.id == false %}
                <form class="form-horizontal" id="_form" action="/admin/save" method="post" enctype="multipart/form-data">
        {% else %}
                <form class="form-horizontal" id="_form" action="/admin/update" method="post" enctype="multipart/form-data">
        {% endif %}
                <div class="form-group">
                    <label for="title" class="col-sm-2 control-label">帐号<font color="red">*</font></label>
                    <div class="col-sm-3">
                        <input type="text" class="form-control" name="account" id="account"  value="{{admin.account}}" placeholder="请输入帐号(6-10位)">
                    </div>
                </div>

            {% if admin.id == false %}
                <div class="form-group">
                    <label for="title" class="col-sm-2 control-label">密码<font color="red">*</font></label>
                    <div class="col-sm-3">
                        <input type="password" class="form-control" name="password" id="password" value="" placeholder="请输入密码(7-20位)">
                    </div>
                </div>
            {% endif %}
                <div class="form-group">
                    <label for="title" class="col-sm-2 control-label">网点名<font color="red">*</font></label>
                    <div class="col-sm-3">
                        <input type="text" class="form-control" name="name" value="{{admin.name}}" id="name"  placeholder="请输入网点名"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="author" class="col-sm-2 control-label">手机号<font color="red">*</font></label>
                    <div class="col-sm-3">
                        <input type="text" class="form-control" name="mobile" id="mobile" value="{{admin.mobile}}" placeholder="请输入手机号">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">地址<font color="red"></font></label>
                    <div class="col-sm-10">
                        <textarea class="form-control" name="address" style="height: 200px;width:500px;" placeholder="请输入地址">{{admin.address}}</textarea>
                    </div>
                </div>
                <div class="form-group">
                    <hr/>
                    <div class="col-sm-offset-2 col-sm-10">
                        <input type="hidden" name="id" value="{{admin.id}}" />
                        {% if admin.id == false  %}
                        <button type="button" onclick="doSubmit()" class="btn btn-primary btn-sm">保存</button>
                        {% else %}
                        <button type="button" onclick="doUpdate()" class="btn btn-primary btn-sm">修改</button>
                        {% endif %}
                        <button type="button" onclick="window.location.href='/admin/lists';" class="btn btn-danger btn-sm">返回</button>
                    </div>
                </div>
            </form>
    </div>
</div>
<script>
     function doSubmit(){
            var account = $("#account").val().replace(/\s+/g,'');
            var password = $("#password").val().replace(/\s+/g,'');
           var name = $("#name").val().replace(/\s+/g,'');
           var mobile =$("#mobile").val().replace(/\s+/g,'');

            if(account == '' || password == '' || name == '' || mobile == ''){
                alert('请填写带*的字段!');
                return;
            }

            $("#_form").submit();
     }

    function doUpdate(){
        var account = $("#account").val().replace(/\s+/g,'');
        var name = $("#name").val().replace(/\s+/g,'');
        var mobile =$("#mobile").val().replace(/\s+/g,'');

        if(account == '' || name == '' || mobile == ''){
            alert('请填写带*的字段!');
            return;
        }

        $("#_form").submit();
    }
</script>
{% endblock %}