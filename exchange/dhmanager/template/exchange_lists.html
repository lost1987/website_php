{% extends 'base.html' %}


{% block content%}
<div class="row" >
    <h3><small class="badge badge-info">实物兑换列表</small></h3>
    <div class="col-xs-10">
       <!-- <form class="form-inline" action="/articles/list">
            <div class="form-group">
                <label style="font-weight: bold;"  for="category_id">栏目&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <select name="search_category_id" class="form-control" style="width: 100px;height:30px;" >
                    <option value="-1">全部</option>
                </select>
            </div>
            <div class="form-group"><input type="hidden" value="1005" name="r"/></div>
            <button type="submit"  class="btn btn-default btn-sm"><span class="glyphicon glyphicon-search" aria-hidden="true"></span>搜索</button>
        </form>-->
    </div>
    <table class="table table-hover table-bordered table-striped">
        <tr>
            <th>实物</th>
            <th>状态</th>
            <th>玩家UID</th>
            <th>玩家昵称</th>
            <th>玩家帐号</th>
            <th >玩家手机</th>
            <th >玩家qq</th>
            <th >人民币价值</th>
            <th>兑换方式</th>
            <th>支付宝帐号</th>
            <th>支付宝收款人</th>
            <th>银行卡号</th>
           <th>开户银行</th>
            <th>开户姓名</th>
            <th>收货地址</th>
            <th>快递信息</th>
            <th>操作</th>
        </tr>
        {% for item in list %}
        <tr>
            <td>{{item.product_name}}</td>
            <td>{{item.status_name}}</td>
            <td>{{item.uid}}</td>
            <td>{{item.nickname}}</td>
            <td>{{item.login_name}}</td>
            <td>{{item.mobile}}</td>
            <td>{{item.qq}}</td>
            <td>{{item.product_rmb}}</td>
            <td>{{item.typename}}</td>
            <td>{{item.alipay_account}}</td>
            <td>{{item.alipay_name}}</td>
            <td>{{item.bank_no}}</td>
            <td>{{item.bank_name}}</td>
            <td>{{item.name}}</td>
            <td>{{item.address}}</td>
            <td>{{item.express}}</td>
            <td>
                {% if item.status == 0  %}
                    <button class="btn btn-default btn-xs" onclick="handle({{item.id}},{{item.type}},this)">处理</button>
                {% else %}
                    /
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>

    <div class="pagination">
            {{pagiation|raw}}
    </div>
</div>
<script>
    function handle(orderid,type,node)
    {
            if(!confirm('确定要处理嘛?'))
                return;

            var params = "type="+type+"&orderid="+orderid;
            if(type != 1 &&  type != 2){
                    var express = window.prompt('请输入快递信息',"");
                    if(express == ''){
                        alert('请输入快递信息');
                        return;
                    }
                    params += "&express="+express;
            }
            $.post('/exchange/handle',params,function(data){
                        var response = eval( '(' +data+ ')');
                        if(response.errCode == 0)
                                window.location.reload();
                        else
                                alert('出错了');
            });
    }
</script>
{% endblock %}